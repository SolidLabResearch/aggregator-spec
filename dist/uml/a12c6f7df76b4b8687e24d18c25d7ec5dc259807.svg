<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="421px" preserveAspectRatio="none" style="width:930px;height:421px;" version="1.1" viewBox="0 0 930 421" width="930px" zoomAndPan="magnify"><defs><filter height="300%" id="f1ag6inqgbc7si" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1ag6inqgbc7si)" height="133.6641" style="stroke: #000000; stroke-width: 2.0;" width="707" x="212.5" y="230.0938"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="39" x2="39" y1="38.2969" y2="380.7578"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="260.5" x2="260.5" y1="38.2969" y2="380.7578"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="583.5" x2="583.5" y1="38.2969" y2="380.7578"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="882.5" x2="882.5" y1="38.2969" y2="380.7578"/><rect fill="#FEFECE" filter="url(#f1ag6inqgbc7si)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="58" x="8" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="44" x="15" y="22.9951">User &#128587;</text><rect fill="#FEFECE" filter="url(#f1ag6inqgbc7si)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="58" x="8" y="379.7578"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="44" x="15" y="399.7529">User &#128587;</text><rect fill="#FEFECE" filter="url(#f1ag6inqgbc7si)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="73" x="222.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="59" x="229.5" y="22.9951">Client &#129489;‚Äç&#128187;</text><rect fill="#FEFECE" filter="url(#f1ag6inqgbc7si)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="73" x="222.5" y="379.7578"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="59" x="229.5" y="399.7529">Client &#129489;‚Äç&#128187;</text><rect fill="#FEFECE" filter="url(#f1ag6inqgbc7si)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="151" x="506.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="137" x="513.5" y="22.9951">Aggregator Server &#129302;</text><rect fill="#FEFECE" filter="url(#f1ag6inqgbc7si)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="151" x="506.5" y="379.7578"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="137" x="513.5" y="399.7529">Aggregator Server &#129302;</text><rect fill="#FEFECE" filter="url(#f1ag6inqgbc7si)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="49" x="856.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="35" x="863.5" y="22.9951">IDP &#128272;</text><rect fill="#FEFECE" filter="url(#f1ag6inqgbc7si)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="49" x="856.5" y="379.7578"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="35" x="863.5" y="399.7529">IDP &#128272;</text><polygon fill="#A80036" points="572,65.4297,582,69.4297,572,73.4297,576,69.4297" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="261" x2="578" y1="69.4297" y2="69.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="159" x="268" y="64.3638">1. Start device_code flow</text><polygon fill="#A80036" points="871,94.5625,881,98.5625,871,102.5625,875,98.5625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="584" x2="877" y1="98.5625" y2="98.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="208" x="591" y="93.4966">1.1 Device authorization request</text><polygon fill="#A80036" points="595,123.6953,585,127.6953,595,131.6953,591,127.6953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="589" x2="882" y1="127.6953" y2="127.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="275" x="601" y="122.6294">device_code + user_code + verification_uri</text><polygon fill="#A80036" points="272,152.8281,262,156.8281,272,160.8281,268,156.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="266" x2="583" y1="156.8281" y2="156.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="299" x="278" y="151.7622">1.2 Return state + user_code + verification_uri</text><polygon fill="#A80036" points="50,181.9609,40,185.9609,50,189.9609,46,185.9609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="44" x2="260" y1="185.9609" y2="185.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="198" x="56" y="180.895">2. Show code + verification URI</text><polygon fill="#A80036" points="871,211.0938,881,215.0938,871,219.0938,875,215.0938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="39" x2="877" y1="215.0938" y2="215.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="122" x="46" y="210.0278">3. Authorize device</text><path d="M212.5,230.0938 L289.5,230.0938 L289.5,237.0938 L279.5,247.0938 L212.5,247.0938 L212.5,230.0938 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="133.6641" style="stroke: #000000; stroke-width: 2.0;" width="707" x="212.5" y="230.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="227.5" y="243.1606">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="229" x="304.5" y="242.3042">[Polling until authorized or expired]</text><polygon fill="#A80036" points="572,264.3594,582,268.3594,572,272.3594,576,268.3594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="261" x2="578" y1="268.3594" y2="268.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="268" y="263.2935">4. Poll with state</text><polygon fill="#A80036" points="871,293.4922,881,297.4922,871,301.4922,875,297.4922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="584" x2="877" y1="297.4922" y2="297.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="591" y="292.4263">4.1 Redeem device_code</text><polygon fill="#A80036" points="595,322.625,585,326.625,595,330.625,591,326.625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="589" x2="882" y1="326.625" y2="326.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="601" y="321.5591">pending / tokens</text><polygon fill="#A80036" points="272,351.7578,262,355.7578,272,359.7578,268,355.7578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="266" x2="583" y1="355.7578" y2="355.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="188" x="278" y="350.6919">202 Accepted or 201 Created</text><!--MD5=[e5c710b1bb535d64dd0e75ddd4ab0d1d]
@startuml
skinparam participantStyle rectangle

participant User as "User üôã"
participant Client as "Client üßë‚Äçüíª"
participant "Aggregator Server ü§ñ" as Aggregator
participant "IDP üîê" as IDP

Client -> Aggregator: 1. Start device_code flow
Aggregator -> IDP: 1.1 Device authorization request
IDP - -> Aggregator: device_code + user_code + verification_uri
Aggregator - -> Client: 1.2 Return state + user_code + verification_uri

Client -> User: 2. Show code + verification URI
User -> IDP: 3. Authorize device

loop Polling until authorized or expired
Client -> Aggregator: 4. Poll with state
Aggregator -> IDP: 4.1 Redeem device_code
IDP - -> Aggregator: pending / tokens
Aggregator - -> Client: 202 Accepted or 201 Created
end
@enduml

PlantUML version 1.2020.02(Sun Mar 01 10:22:07 UTC 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 21.0.10+7-Debian-1deb13u1
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>
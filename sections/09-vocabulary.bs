Vocabulary {#vocabulary}
===================================

The Aggregator vocabulary is defined in the `aggr:` namespace 
(`https://spec.knows.idlab.ugent.be/aggregator-protocol/latest/#`). The following classes and properties are used 
throughout this specification.

Classes {#vocabulary-classes}
---------------------------

### aggr:Aggregator ### {#aggr-aggregator-class}
Describes an Aggregator Instance (its base URL is the Aggregator Description resource).

**type:** [rdfs:Class](https://www.w3.org/TR/rdf-schema/#ch_class)<br>
**subClassOf:** [schema:Service](https://schema.org/Service)<br>
**subClassOf:** [foaf:Agent](https://xmlns.com/foaf/0.1/Agent)

### aggr:Service ### {#aggr-service-class}
Represents a configured Aggregator pipeline that can be created, inspected, and removed via the Service
Management API (e.g., `/config/services/{service_id}`).

**type:** [rdfs:Class](https://www.w3.org/TR/rdf-schema/#ch_class)<br>
**subClassOf:** [prov:Activity](https://www.w3.org/TR/prov-o/#Activity),
[fno:Execution](https://w3id.org/function/spec/#Execution)

### aggr:AggregatorServer ### {#aggr-aggregator-server-class}
Describes the Aggregator Server Description document that advertises discovery metadata.

**type:** [rdfs:Class](https://www.w3.org/TR/rdf-schema/#ch_class)<br>
**subClassOf:** [schema:Service](https://schema.org/Service)

### aggr:ServiceCollection ### {#aggr-service-collection-class}
Describes the service collection resource (e.g., `/config/services`).

**type:** [rdfs:Class](https://www.w3.org/TR/rdf-schema/#ch_class)<br>
**subClassOf:** [schema:Collection](https://schema.org/Collection),
[hydra:Collection](https://www.hydra-cg.com/spec/latest/core/#collections)

### aggr:TransformationCollection ### {#aggr-transformation-collection-class}
Describes a transformation catalog resource that lists the transformations supported by an Aggregator Server
(and optionally instance-specific transformations).

**type:** [rdfs:Class](https://www.w3.org/TR/rdf-schema/#ch_class)<br>
**subClassOf:** [schema:Collection](https://schema.org/Collection),
[hydra:Collection](https://www.hydra-cg.com/spec/latest/core/#collections)

### aggr:RegistrationFlow ### {#aggr-registration-flow-class}
Describes a registration flow supported by an Aggregator Server.
This specification models each flow as an RDF class so that `aggr:supportedRegistrationType` can be
semantically annotated by referencing the relevant flow class (e.g., `aggr:AuthorizationCodeFlow`).

**type:** [rdfs:Class](https://www.w3.org/TR/rdf-schema/#ch_class)<br>
**subClassOf:** [rdfs:Class](https://www.w3.org/TR/rdf-schema/#ch_class)

### aggr:NoAuthFlow ### {#aggr-no-auth-flow-class}
Registration flow where the Aggregator Instance does not authenticate and only accesses public resources.

**type:** [rdfs:Class](https://www.w3.org/TR/rdf-schema/#ch_class)<br>
**subClassOf:** `aggr:RegistrationFlow`

### aggr:ProvisionFlow ### {#aggr-provision-flow-class}
Registration flow where the Aggregator Server provisions an Aggregator Instance with its own identity.

**type:** [rdfs:Class](https://www.w3.org/TR/rdf-schema/#ch_class)<br>
**subClassOf:** `aggr:RegistrationFlow`

### aggr:AuthorizationCodeFlow ### {#aggr-authorization-code-flow-class}
Registration flow based on OAuth 2.0 Authorization Code [[RFC6749]] (https://datatracker.ietf.org/doc/html/rfc6749)
(via OpenID Connect), where the Aggregator acts on behalf of an end-user with a token scoped to the
Aggregator.

**type:** [rdfs:Class](https://www.w3.org/TR/rdf-schema/#ch_class)<br>
**subClassOf:** `aggr:RegistrationFlow`

### aggr:DeviceCodeFlow ### {#aggr-device-code-flow-class}
Registration flow based on OAuth 2.0 Device Authorization Grant [[RFC8628]].

**type:** [rdfs:Class](https://www.w3.org/TR/rdf-schema/#ch_class)<br>
**subClassOf:** `aggr:RegistrationFlow`

Properties {#vocabulary-properties}
---------------------------

### aggr:createdAt ### {#aggr-created-at-property}
Timestamp when an `aggr:Aggregator` or `aggr:Service` was created.

**type:** [rdf:Property](https://www.w3.org/TR/rdf-schema/#ch_property)<br>
**domain:** `aggr:Aggregator`, `aggr:Service`<br>
**range:** [xsd:dateTime](https://www.w3.org/TR/xmlschema11-2/#dateTime)

### aggr:loginStatus ### {#aggr-login-status-property}
Indicates whether the stored token set for an `aggr:Aggregator` is currently valid.

**type:** [rdf:Property](https://www.w3.org/TR/rdf-schema/#ch_property)<br>
**domain:** `aggr:Aggregator`<br>
**range:** [xsd:boolean](https://www.w3.org/TR/xmlschema11-2/#boolean)

### aggr:tokenExpiry ### {#aggr-token-expiry-property}
Timestamp when the current access token for an `aggr:Aggregator` will expire.

**type:** [rdf:Property](https://www.w3.org/TR/rdf-schema/#ch_property)<br>
**domain:** `aggr:Aggregator`<br>
**range:** [xsd:dateTime](https://www.w3.org/TR/xmlschema11-2/#dateTime)

### aggr:transformationsEndpoint ### {#aggr-transformations-endpoint-property}
Links an `aggr:Aggregator` to its (possibly private) transformations endpoint.

**type:** [rdf:Property](https://www.w3.org/TR/rdf-schema/#ch_property)<br>
**domain:** `aggr:Aggregator`<br>
**range:** [xsd:anyURI](https://www.w3.org/TR/xmlschema11-2/#anyURI)

### aggr:serviceCollectionEndpoint ### {#aggr-service-collection-endpoint-property}
Links an `aggr:Aggregator` to its service collection endpoint.

**type:** [rdf:Property](https://www.w3.org/TR/rdf-schema/#ch_property)<br>
**domain:** `aggr:Aggregator`<br>
**range:** [xsd:anyURI](https://www.w3.org/TR/xmlschema11-2/#anyURI)

### aggr:service ### {#aggr-service-property}
Links an `aggr:ServiceCollection` to the `aggr:Service` instances it advertises.

**type:** [rdf:Property](https://www.w3.org/TR/rdf-schema/#ch_property)<br>
**domain:** `aggr:ServiceCollection`<br>
**range:** `aggr:Service`

### aggr:hasTransformation ### {#aggr-has-transformation-property}
Links an `aggr:TransformationCollection` to the transformations it advertises.

**type:** [rdf:Property](https://www.w3.org/TR/rdf-schema/#ch_property)<br>
**domain:** `aggr:TransformationCollection`<br>
**range:** [fno:Function](https://w3id.org/function/spec/#Function)

### aggr:status ### {#aggr-status-property}
Provides the lifecycle phase of an `aggr:Service` (values such as `running`, `stopped`, or `error`).

**type:** [rdf:Property](https://www.w3.org/TR/rdf-schema/#ch_property)<br>
**domain:** `aggr:Service`<br>
**range:** [xsd:string](https://www.w3.org/TR/xmlschema11-2/#string)

### aggr:statusDetail ### {#aggr-status-detail-property}
Provides a human-readable explanation of the current `aggr:Service` status (for example, a stop reason or error message).

**type:** [rdf:Property](https://www.w3.org/TR/rdf-schema/#ch_property)<br>
**domain:** `aggr:Service`<br>
**range:** [xsd:string](https://www.w3.org/TR/xmlschema11-2/#string)

### aggr:registrationEndpoint ### {#aggr-registration-endpoint-property}
Links an `aggr:AggregatorServer` to its registration endpoint.

**type:** [rdf:Property](https://www.w3.org/TR/rdf-schema/#ch_property)<br>
**domain:** `aggr:AggregatorServer`<br>
**range:** [xsd:anyURI](https://www.w3.org/TR/xmlschema11-2/#anyURI)

### aggr:supportedRegistrationType ### {#aggr-supported-registration-type-property}
Lists the registration flows advertised by an `aggr:AggregatorServer`.

**type:** [rdf:Property](https://www.w3.org/TR/rdf-schema/#ch_property)<br>
**domain:** `aggr:AggregatorServer`<br>
**range:** [rdfs:Class](https://www.w3.org/TR/rdf-schema/#ch_class) (expected to be an `aggr:RegistrationFlow` class)

### aggr:registrationRequestFormatSupported ### {#aggr-registration-request-format-supported-property}
Lists the supported request formats for an `aggr:AggregatorServer` registration endpoint.

**type:** [rdf:Property](https://www.w3.org/TR/rdf-schema/#ch_property)<br>
**domain:** `aggr:AggregatorServer`<br>
**range:** [xsd:string](https://www.w3.org/TR/xmlschema11-2/#string)

### aggr:specVersion ### {#aggr-spec-version-property}
States which version of this specification an `aggr:AggregatorServer` implements.

**type:** [rdf:Property](https://www.w3.org/TR/rdf-schema/#ch_property)<br>
**domain:** `aggr:AggregatorServer`<br>
**range:** [xsd:string](https://www.w3.org/TR/xmlschema11-2/#string)

### aggr:clientIdentifier ### {#aggr-client-id-property}
Links an `aggr:AggregatorServer` to its Client ID Document.

**type:** [rdf:Property](https://www.w3.org/TR/rdf-schema/#ch_property)<br>
**domain:** `aggr:AggregatorServer`<br>
**range:** [xsd:anyURI](https://www.w3.org/TR/xmlschema11-2/#anyURI)

### aggr:transformationCatalog ### {#aggr-transformation-catalog-property}
References the Aggregator Serverâ€™s public transformation catalog.

**type:** [rdf:Property](https://www.w3.org/TR/rdf-schema/#ch_property)<br>
**domain:** `aggr:AggregatorServer`<br>
**range:** [xsd:anyURI](https://www.w3.org/TR/xmlschema11-2/#anyURI)

Claim Types {#vocabulary-claim-types}
---------------------------

### aggr:transformation-description ### {#aggr-transformation-description-claim-type}
Identifier for the UMA `claim_type` used to request or provide a transformation description.

**type:** [rdfs:Resource](https://www.w3.org/TR/rdf-schema/#ch_resource)

Claim tokens of this type MUST be RDF descriptions of the intended transformation (for example an `fno:Execution` or a 
reference to a transformation catalog entry). Acceptable `claim_token_format` values are URIs identifying RDF 
serializations (such as `http://www.w3.org/ns/formats/Turtle` and `http://www.w3.org/ns/formats/JSON-LD`).

### aggr:derivation-access ### {#aggr-derivation-access-claim-type}
Identifier for the UMA `claim_type` used to request or provide upstream access tokens for derived resources.

**type:** [rdfs:Resource](https://www.w3.org/TR/rdf-schema/#ch_resource)

Claim tokens of this type MUST be access tokens issued by the upstream Authorization Server for the
`derivation_resource_id` referenced in the claim request.
